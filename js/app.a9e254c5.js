(function(e){function t(t){for(var o,s,r=t[0],n=t[1],a=t[2],w=0,u=[];w<r.length;w++)s=r[w],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&u.push(c[s][0]),c[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);h&&h(t);while(u.length)u.shift()();return i.push.apply(i,a||[]),l()}function l(){for(var e,t=0;t<i.length;t++){for(var l=i[t],o=!0,r=1;r<l.length;r++){var n=l[r];0!==c[n]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=l[0]))}return e}var o={},c={app:0},i=[];function s(t){if(o[t])return o[t].exports;var l=o[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,s),l.l=!0,l.exports}s.m=e,s.c=o,s.d=function(e,t,l){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(l,o,function(t){return e[t]}.bind(null,o));return l},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/project-goban/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var a=0;a<r.length;a++)t(r[a]);var h=n;i.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"034f":function(e,t,l){"use strict";var o=l("85ec"),c=l.n(o);c.a},"189a":function(e,t,l){"use strict";var o=l("206f"),c=l.n(o);c.a},"206f":function(e,t,l){},"56d7":function(e,t,l){"use strict";l.r(t);l("e260"),l("e6cf"),l("cca6"),l("a79d");var o=l("2b0e"),c=l("5f5b"),i=(l("f9e3"),l("2dd8"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("div",{staticClass:"container justify-content-center"},[l("div",{staticClass:"row"},[l("app-goban"),l("app-controls")],1)])])}),s=[],r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"col col-12 col-lg-5"},[l("p",{staticClass:"text-center h5"},[e._v(" Пленники: "),l("span",{attrs:{"aria-label":"белых"}},[e._v("⚫")]),e._v(e._s(e.captives.black)+" "),l("span",{attrs:{"aria-label":"черных"}},[e._v("⚪")]),e._v(e._s(e.captives.white)+" ")]),l("div",{staticClass:"my-2 controls"},[l("b-button-toolbar",{staticClass:"d-flex justify-content-start",attrs:{"aria-label":"Меню гобана"}},[l("b-button",{staticClass:"m-1",attrs:{variant:"info"},on:{click:e.newGame}},[e._v("Новая игра")]),l("b-button",{staticClass:"m-1",attrs:{variant:"info"},on:{click:e.revert}},[e._v("Вернуть ход")]),l("b-dropdown",{staticClass:"m-1",attrs:{variant:"info",right:"",text:"Выбрать пресет"}},[l("b-dropdown-item",{on:{click:function(t){return e.preset("atari")}}},[e._v("Атари-го")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("corner")}}},[e._v("Выживание в углу")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("full")}}},[e._v("Выживание по всей доске")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("center")}}},[e._v("Выживание в центре")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("colorless")}}},[e._v("Одноцветное го")])],1),l("b-form-checkbox",{staticClass:"m-1 d-none d-md-block",attrs:{name:"check-button",size:"lg",switch:""},on:{change:e.toggleCoords},model:{value:e.showCoords,callback:function(t){e.showCoords=t},expression:"showCoords"}},[e._v(" Показывать координаты ")]),l("b-form-checkbox",{staticClass:"m-1 d-none d-md-block",attrs:{name:"check-button",size:"lg",switch:""},on:{change:e.toggleBlind},model:{value:e.isBlind,callback:function(t){e.isBlind=t},expression:"isBlind"}},[e._v(" Игра вслепую ")])],1)],1)])},n=[],a=(l("d3b7"),new o["default"]),h=a,w={name:"Controls",data:function(){return{showCoords:!0,isBlind:!1,captives:{black:0,white:0}}},methods:{newGame:function(){var e=this;return new Promise((function(t){e.$bvModal.msgBoxConfirm("Вы уверены?",{okVariant:"info",cancelVariant:"outline-dark",okTitle:"Да, начать новую игру",cancelTitle:"Нет, вернуться",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(e){e&&(h.$emit("new-game"),t(!0)),t(!1)}))}))},revert:function(){h.$emit("revert")},preset:function(e){this.newGame().then((function(t){t&&h.$emit("preset",e)}))},toggleCoords:function(){h.$emit("toggle-coords")},toggleBlind:function(){h.$emit("toggle-blind")}},created:function(){var e=this;h.$on("captives-change",(function(t,l){e.captives[t]=l}))}},u=w,v=(l("f5fc"),l("2877")),d=Object(v["a"])(u,r,n,!1,null,"93199820",null),f=d.exports,b=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"col col-12 col-lg-7 justify-content-center mb-3"},[l("div",{staticClass:"container container-fluid goban"},[e.showCoords?l("div",{staticClass:"d-flex justify-content-center"},e._l(19,(function(t){return l("div",{key:t,staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))])})),0):e._e(),e._l(19,(function(t){return l("div",{key:t,staticClass:"d-flex justify-content-center"},[e.showCoords?l("div",{staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))]):e._e(),e._l(19,(function(o){return l("goban-cell",{key:t+o,attrs:{move:e.isBlacksMove,row:t,cell:o,blind:e.blind,stone:e.hasStone(t,o),last:e.hasStone(t,o)&&e.isLastMove(t,o)},on:{stone:e.placeStone}})})),e.showCoords?l("div",{staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))]):e._e()],2)})),e.showCoords?l("div",{staticClass:"d-flex justify-content-center"},e._l(19,(function(t){return l("div",{key:t,staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))])})),0):e._e()],2)])},p=[],g=(l("a623"),l("4de4"),l("7db0"),l("c740"),l("4160"),l("a434"),l("159b"),l("53ca")),k=l("5530"),m=l("2909"),_={atari:{black:[{row:9,cell:11},{row:10,cell:10}],white:[{row:9,cell:10},{row:10,cell:11}]},corner:{black:[{row:10,cell:1},{row:10,cell:2},{row:10,cell:3},{row:10,cell:4},{row:10,cell:5},{row:10,cell:6},{row:10,cell:7},{row:10,cell:8},{row:10,cell:9},{row:10,cell:10},{row:1,cell:10},{row:2,cell:10},{row:3,cell:10},{row:4,cell:10},{row:5,cell:10},{row:6,cell:10},{row:7,cell:10},{row:8,cell:10},{row:9,cell:10},{row:10,cell:10}]},center:{black:[{row:1,cell:2},{row:1,cell:3},{row:1,cell:4},{row:1,cell:5},{row:1,cell:6},{row:1,cell:7},{row:1,cell:8},{row:1,cell:9},{row:1,cell:10},{row:1,cell:11},{row:1,cell:12},{row:1,cell:13},{row:1,cell:14},{row:1,cell:15},{row:1,cell:16},{row:1,cell:17},{row:1,cell:18},{row:19,cell:2},{row:19,cell:3},{row:19,cell:4},{row:19,cell:5},{row:19,cell:6},{row:19,cell:7},{row:19,cell:8},{row:19,cell:9},{row:19,cell:10},{row:19,cell:11},{row:19,cell:12},{row:19,cell:13},{row:19,cell:14},{row:19,cell:15},{row:19,cell:16},{row:19,cell:17},{row:19,cell:18},{row:2,cell:1},{row:3,cell:1},{row:4,cell:1},{row:5,cell:1},{row:6,cell:1},{row:7,cell:1},{row:8,cell:1},{row:9,cell:1},{row:10,cell:1},{row:11,cell:1},{row:12,cell:1},{row:13,cell:1},{row:14,cell:1},{row:15,cell:1},{row:16,cell:1},{row:17,cell:1},{row:18,cell:1},{row:2,cell:19},{row:3,cell:19},{row:4,cell:19},{row:5,cell:19},{row:6,cell:19},{row:7,cell:19},{row:8,cell:19},{row:9,cell:19},{row:10,cell:19},{row:11,cell:19},{row:12,cell:19},{row:13,cell:19},{row:14,cell:19},{row:15,cell:19},{row:16,cell:19},{row:17,cell:19},{row:18,cell:19}]},full:{black:[{row:3,cell:3},{row:4,cell:4},{row:17,cell:3},{row:16,cell:4},{row:3,cell:17},{row:4,cell:16},{row:17,cell:17},{row:16,cell:16},{row:10,cell:4},{row:10,cell:3},{row:4,cell:10},{row:3,cell:10},{row:16,cell:10},{row:17,cell:10},{row:10,cell:16},{row:10,cell:17},{row:9,cell:10},{row:10,cell:9},{row:10,cell:11},{row:11,cell:10}]}},C=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:e.classes,on:{click:e.placeStone}},[!e.stone||e.blind&&!e.last?l("div",{staticClass:"preview",class:e.previewClass,on:{mouseenter:e.addPreview,focus:e.addPreview,touchstart:e.addPreview,mouseleave:e.removePreview,touchend:e.removePreview,blur:e.removePreview}}):l("div",{class:e.stoneClasses}),e.star?l("div",{staticClass:"star"}):e._e()])},j=[],O=(l("a9e3"),{name:"GobanCell.vue",props:{row:Number,cell:Number,stone:String,move:Boolean,last:Boolean,blind:Boolean},data:function(){return{classes:["cell"],star:!1,previewClass:""}},methods:{placeStone:function(){this.$emit("stone",this.row,this.cell),this.removePreview()},addPreview:function(){this.previewClass=this.move?"preview_black":"preview_white"},removePreview:function(){this.previewClass=""}},computed:{stoneClasses:function(){var e=this.last&&!this.blind?"last":"";return["stone",this.stone,e]}},created:function(){this.removePreview(),1===this.row?this.classes.push("top"):19===this.row&&this.classes.push("bottom"),1===this.cell?this.classes.push("left"):19===this.cell&&this.classes.push("right"),(4===this.row&&4===this.cell||4===this.row&&16===this.cell||16===this.row&&4===this.cell||16===this.row&&16===this.cell||10===this.row&&10===this.cell||10===this.row&&4===this.cell||10===this.row&&16===this.cell||4===this.row&&10===this.cell||16===this.row&&10===this.cell)&&(this.star=!0)}}),y=O,S=(l("189a"),Object(v["a"])(y,C,j,!1,null,"5e04f474",null)),$=S.exports,B={name:"Goban.vue",components:{"goban-cell":$},data:function(){return{publicPath:"/project-goban/",showCoords:!0,colorless:!1,blind:!1,isBlacksMove:!0,black:[],white:[],captives:{black:0,white:0},currentGroup:[],log:[]}},methods:{newGame:function(){this.black=[],this.white=[],this.captives.black=0,this.captives.white=0,h.$emit("captives-change","black",this.captives.black),h.$emit("captives-change","white",this.captives.white),this.isBlacksMove=!0,this.colorless=!1,this.currentGroup=[],this.log=[]},placeStone:function(e,t){var l=this;if(!this.hasStone(e,t)){var o=this.isBlacksMove?"black":"white",c=this.isBlacksMove?"white":"black";this[o].push({row:e,cell:t});var i=this.getConnectedCoords(e,t,c);if(i.forEach((function(e){l.currentGroup=[],l.isSurrounded(e.row,e.cell,c)&&l.removeGroup(l.currentGroup,c,o)})),this.currentGroup=[],this.isSurrounded(e,t,o))this[o].pop();else{if(this.log.length>6&&this.isKo())return this.black=Object(m["a"])(this.log[this.log.length-1].black),this.white=Object(m["a"])(this.log[this.log.length-1].white),this.captives=Object(k["a"])({},this.log[this.log.length-1].captives),h.$emit("captives-change","black",this.captives.black),void h.$emit("captives-change","white",this.captives.white);this.playStoneSound(),this.log.push({black:Object(m["a"])(this.black),white:Object(m["a"])(this.white),captives:Object(k["a"])({},this.captives)}),this.isBlacksMove=!this.isBlacksMove}}},hasBlackStone:function(e,t){return!!this.black.filter((function(l){return l.row===e&&l.cell===t})).length},hasWhiteStone:function(e,t){return!!this.white.filter((function(l){return l.row===e&&l.cell===t})).length},hasStone:function(e,t){return this.hasWhiteStone(e,t)?"white":this.hasBlackStone(e,t)?this.colorless?"white":"black":e>19||e<1||t>19||t<1?"edge":null},getConnectedCoords:function(e,t,l){return this[l].filter((function(l){return l.row===e&&l.cell===t+1||l.row===e+1&&l.cell===t||l.row===e-1&&l.cell===t||l.row===e&&l.cell===t-1}))},isSurrounded:function(e,t,l){var o=this;this.currentGroup.push({row:e,cell:t});var c=!this.hasStone(e+1,t)||!this.hasStone(e,t+1)||!this.hasStone(e-1,t)||!this.hasStone(e,t-1);if(c)return!1;var i=this.getConnectedCoords(e,t,l);return 0===i.length||i.every((function(e){return!!o.currentGroup.find((function(t){return t.row===e.row&&t.cell===e.cell}))||o.isSurrounded(e.row,e.cell,l)}))},removeGroup:function(e,t,l){var o=this;e.forEach((function(e){var c=o[t].findIndex((function(t){return t.row===e.row&&t.cell===e.cell}));o[t].splice(c,1),o.captives[l]+=1,h.$emit("captives-change",l,o.captives[l])}))},isKo:function(){var e=this,t=this.log[this.log.length-2].black,l=this.log[this.log.length-2].white;if(this.black.length!==t.length||this.white.length!==l.length)return!1;for(var o=function(l){if(!t.find((function(t){return t.row===e.black[l].row&&t.cell===e.black[l].cell})))return{v:!1}},c=0;c<this.black.length;c++){var i=o(c);if("object"===Object(g["a"])(i))return i.v}for(var s=function(t){if(!l.find((function(l){return l.row===e.white[t].row&&l.cell===e.black[t].cell})))return{v:!1}},r=0;r<this.white;r++){var n=s(r);if("object"===Object(g["a"])(n))return n.v}return!0},revert:function(){this.log.length>1?(this.black=Object(m["a"])(this.log[this.log.length-2].black),this.white=Object(m["a"])(this.log[this.log.length-2].white),this.captives=Object(k["a"])({},this.log[this.log.length-2].captives)):(this.black=[],this.white=[],this.captives.white=0,this.captives.black=0),h.$emit("captives-change","black",this.captives.black),h.$emit("captives-change","white",this.captives.white),this.log.pop(),this.isBlacksMove=!this.isBlacksMove},setExercise:function(e){if(!(this.log.length||this.black.length||this.white.length)){switch(e){case"atari":this.black=Object(m["a"])(_.atari.black),this.white=Object(m["a"])(_.atari.white);break;case"corner":this.black=Object(m["a"])(_.corner.black),this.white=[],this.isBlacksMove=!1;break;case"center":this.black=Object(m["a"])(_.center.black),this.white=[],this.isBlacksMove=!1;break;case"full":this.black=Object(m["a"])(_.full.black),this.white=[],this.isBlacksMove=!1;break;case"colorless":this.colorless=!0;default:this.black=[],this.white=[]}this.captives.white=0,this.captives.black=0,h.$emit("captives-change","black",this.captives.black),h.$emit("captives-change","white",this.captives.white),this.log.push({black:Object(m["a"])(this.black),white:Object(m["a"])(this.white),captives:Object(k["a"])({},this.captives)})}},isLastMove:function(e,t){return this.blind?e===this.black[this.black.length-1].row&&t===this.black[this.black.length-1].cell||e===this.white[this.white.length-1].row&&t===this.white[this.white.length-1].cell:this.isBlacksMove?e===this.white[this.white.length-1].row&&t===this.white[this.white.length-1].cell:e===this.black[this.black.length-1].row&&t===this.black[this.black.length-1].cell},playStoneSound:function(){var e=new Audio("".concat(this.publicPath,"stone.mp3"));e.play()}},created:function(){var e=this;h.$on("new-game",this.newGame),h.$on("preset",(function(t){e.setExercise(t)})),h.$on("toggle-coords",(function(){e.showCoords=!e.showCoords})),h.$on("toggle-blind",(function(){e.blind=!e.blind})),h.$on("revert",this.revert)}},x=B,M=(l("9d93"),Object(v["a"])(x,b,p,!1,null,"55e91ab4",null)),P=M.exports,G={name:"App",components:{"app-goban":P,"app-controls":f}},E=G,T=(l("034f"),Object(v["a"])(E,i,s,!1,null,null,null)),z=T.exports;o["default"].config.productionTip=!1,o["default"].use(c["a"]),new o["default"]({render:function(e){return e(z)}}).$mount("#app")},"85ec":function(e,t,l){},9979:function(e,t,l){},"9d93":function(e,t,l){"use strict";var o=l("9979"),c=l.n(o);c.a},e20a:function(e,t,l){},f5fc:function(e,t,l){"use strict";var o=l("e20a"),c=l.n(o);c.a}});
//# sourceMappingURL=app.a9e254c5.js.map